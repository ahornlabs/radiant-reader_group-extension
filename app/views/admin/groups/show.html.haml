- include_stylesheet 'admin/group'
- body_classes << "reversed"

%h1
  Group:
  = @group.name

= textilize(@group.description)


#group_pages.box.narrow
  %h2
    Private pages
  %ul
    - page = Page.respond_to?(:homepage) ? Page.homepage : Page.find_by_parent_id(nil)
    %div{:id => "page_holder_#{page.id}"}
      = render :partial => 'admin/permissions/page', :object => page

#group_people.box.narrow
  %h2
    Group members
  - readers = Reader.find(:all)
  - total = readers.count
  - column_length = (readers.count-1) / 2
  - columns = [readers[0..column_length], readers[column_length+1..readers.count]]
  - columns.each do |column|
    %ul.column
      - column.each do |reader|
        %div{:id => "reader_holder_#{reader.id}"}
          = render :partial => 'admin/memberships/reader', :object => reader

#footnotes
  %p
    The pages selected on the left are only visible to the people selected on the right.

:javascript
  var h1 = $('group_pages').getHeight();
  var h2 = $('group_people').getHeight();
  var h = (h1 > h2) ? h1 : h2
  $('group_people').setStyle({'height': h + 'px'});
  $('group_pages').setStyle({'height': h + 'px'});
